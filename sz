@Test
void getofferContent_shouldThrowException_whenBuildContentFails() {
    String typeDevice = "mobile";
    String token = "token";

    B2DResponse mockB2DResponse = new B2DResponse();
    ModyoResponse mockModyoResponse = new ModyoResponse();
    List<B2DToModyoKeyDTO> modyoKeys = List.of(new B2DToModyoKeyDTO());

    when(modyoRepository.callModyo(Constantsutil.CLIENT_ID))
        .thenReturn(Mono.just(mockModyoResponse));

    when(b2DRepository.callB2D(any()))
        .thenReturn(Mono.just(mockB2DResponse));

    doReturn(modyoKeys).when(useCase)
        .extraerModyokeys(eq(mockB2DResponse), anyString());

    doThrow(new RuntimeException("simulated error")).when(useCase)
        .buildCampaignContentList(eq(modyoKeys), any(), eq(typeDevice));

    Exception ex = assertThrows(ServiceException.class, () -> {
        useCase.getofferContent(typeDevice, token).block();
    });

    assertTrue(ex.getMessage().contains("Error processing campaign data"));
}
